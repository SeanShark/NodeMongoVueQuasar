import{_ as E,H as F,r as H,q as J,D as W,J as r,K as u,L as t,O as i,N as e,R as m,Q as X,b0 as y,S as p,b1 as G,X as Z,b2 as b,b3 as w,b4 as q,W as h,M as V,T as R,U as ee,b5 as te,a1 as M,P as x,t as _,b6 as N,a2 as A,a3 as ae,a4 as oe}from"./index.5b4092ab.js";import{Q as K}from"./QTooltip.fe87dd7d.js";import{Q as le,a as O}from"./QTabs.c37fff5a.js";import{Q as f,a as s,b as v}from"./QItemLabel.b55d4483.js";import{Q as D}from"./QList.a629aa58.js";import{Q as Y}from"./QBtnDropdown.a9114c5d.js";import{Q as se,a as j}from"./QTabPanels.d843a29d.js";import{Q as ne}from"./QPage.95fe2adc.js";import{C as k}from"./ClosePopup.75cca3ad.js";import{u as re,d as de}from"./store.8badecaa.js";import"./QResizeObserver.f1384959.js";import"./rtl.b51694b1.js";import"./use-panel.72e4e881.js";import"./touch.3df10340.js";import"./axios.7331a07d.js";const $=C=>(ae("data-v-506dd856"),C=C(),oe(),C),ie=$(()=>i("p",{class:"text-h6 text-center q-pa-md"},"\u4EFB\u52A1To-Do",-1)),ce={class:"column q-pa-xs q-ma-none"},ue={class:"col q-pa-xs"},me={class:"q-gutter-sm row justify-center"},pe={class:"q-gutter-y-md q-pa-none"},_e={class:"text-italic"},fe={key:0,class:"no-tasks absolute-center"},ve=$(()=>i("div",{class:"text-h5 text-primary text-center"},"\u65E0\u4EFB\u52A1",-1)),ge={class:"text-italic"},ke={key:0,class:"no-tasks absolute-center"},ye=$(()=>i("div",{class:"text-h5 text-primary text-center"},"\u65E0\u4EFB\u52A1",-1)),be={__name:"HomePage",setup(C){const T=F(),o=re(),z=H(null);J(async()=>{if(localStorage.getItem("token")!==null)try{await o.verifyUser().then(()=>{o.user?o.getTodolists():T.push("/index")}).catch(()=>{T.push("/index")})}catch{T.push("/index")}else T.push("/index")});const Q=H("todo"),c=W({owner:"",todo:"",color:"text-black",createdAt:""}),U=async()=>{var n;await((n=z.value)==null?void 0:n.validate())&&(c.owner=o.user.email,c.createdAt=de.formatDate(Date.now(),"YYYY-MM-DD-HH:mm:ss"),o.createTodo(c).then(()=>{c.todo="",c.color="text-black",o.successTip(o.systemMsg)}).catch(()=>{o.failureTip(o.systemMsg)}))},I=(n,l,a)=>{setTimeout(()=>{o.editTodo(n,l,a).then(()=>{o.successTip(o.systemMsg),o.getTodolists()}).catch(()=>{o.failureTip(o.systemMsg)})},300)},P=[{label:"\u9ED1\u8272",value:"text-black",color:"black"},{label:"\u84DD\u8272",value:"text-primary",color:"primary"},{label:"\u7D2B\u8272",value:"text-accent",color:"accent"},{label:"\u7EA2\u8272",value:"text-negative",color:"negative"},{label:"\u7EFF\u8272",value:"text-positive",color:"positive"},{label:"\u9EC4\u8272",value:"text-warning",color:"warning"},{label:"\u975B\u84DD\u8272",value:"text-indigo",color:"indigo"}],S=n=>{o.$q.dialog({title:"\u786E\u5B9A",message:"\u786E\u5B9A\u8981\u5220\u9664\u8BB0\u5F55?",cancel:!0,persistent:!0,ok:{push:!0,label:"\u786E\u5B9A",color:"green"},cancel:{push:!0,color:"blue-grey",label:"\u53D6\u6D88"}}).onOk(async()=>{await o.deleteTodo(n).then(()=>{o.successTip(o.systemMsg)}).catch(l=>{o.failureTip(o.systemMsg)})}).onCancel(()=>{})},L=n=>{o.$q.dialog({title:"\u7F16\u8F91\u5185\u5BB9",message:"\u8BF7\u8F93\u5165\u9700\u8981\u7F16\u8F91\u7684\u5185\u5BB9",prompt:{model:`${n.todo}`,type:"text"},cancel:!0,persistent:!0,ok:{push:!0,label:"\u786E\u5B9A",color:"green"},cancel:{push:!0,color:"blue-grey",label:"\u53D6\u6D88"}}).onOk(l=>{if(l==="")return o.failureTip("\u5185\u5BB9\u4E0D\u80FD\u4E3A\u7A7A");o.editTodo("todo",n._id,l).then(()=>{o.successTip(o.systemMsg)}).catch(()=>{o.failureTip(o.systemMsg)})}).onCancel(()=>{})},B=n=>{o.$q.dialog({title:"\u9009\u62E9\u989C\u8272",message:"\u9009\u62E9\u4F60\u9700\u8981\u6539\u53D8\u7684\u989C\u8272",options:{type:"radio",model:`${n.color}`,inline:!0,items:P},cancel:!0,persistent:!0,ok:{push:!0,label:"\u786E\u5B9A",color:"green"},cancel:{push:!0,color:"blue-grey",label:"\u53D6\u6D88"}}).onOk(l=>{o.editTodo("color",n._id,l).then(()=>{o.successTip(o.systemMsg)}).catch(a=>{o.failureTip(o.systemMsg)})})};return(n,l)=>(r(),u(ne,{class:"bg-grey-3"},{default:t(()=>[ie,i("div",ce,[e(Z,{ref_key:"inputRef",ref:z,modelValue:c.todo,"onUpdate:modelValue":l[0]||(l[0]=a=>c.todo=a),"bg-color":"white",class:"col q-pa-none","bottom-slots":"","hide-bottom-space":"",rules:[a=>!!a||"\u8BF7\u8F93\u5165\u5185\u5BB9"],outlined:"",placeholder:"\u8BF7\u8F93\u5165\u60A8\u7684\u5185\u5BB9","lazy-rules":"ondemand",autocomplete:"off",onKeyup:G(U,["enter"])},{prepend:t(()=>[e(m,{name:"event"})]),append:t(()=>[e(X,{round:"",dense:"",flat:"",icon:"send",onClick:y(U,["stop"])},{default:t(()=>[e(K,null,{default:t(()=>[p(" \u53D1\u9001 ")]),_:1})]),_:1},8,["onClick"])]),_:1},8,["modelValue","rules","onKeyup"]),i("div",ue,[i("div",me,[(r(),b(q,null,w(P,(a,g)=>e(te,{key:g,modelValue:c.color,"onUpdate:modelValue":d=>c.color=d,item:a,index:g,"keep-color":"",val:a.value,color:a.color},{default:t(()=>[e(K,{class:M("bg-"+a.color)},{default:t(()=>[p(x(a.label),1)]),_:2},1032,["class"])]),_:2},1032,["modelValue","onUpdate:modelValue","item","index","val","color"])),64))])])]),i("div",pe,[e(ee,null,{default:t(()=>[e(le,{modelValue:Q.value,"onUpdate:modelValue":l[1]||(l[1]=a=>Q.value=a),dense:"",class:"text-grey q-pa-none","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:t(()=>[e(O,{name:"todo",label:"\u4EFB\u52A1"}),e(O,{name:"done",label:"\u5DF2\u5B8C\u6210"})]),_:1},8,["modelValue"]),e(h),e(se,{modelValue:Q.value,"onUpdate:modelValue":l[4]||(l[4]=a=>Q.value=a),animated:""},{default:t(()=>[e(j,{class:"q-pa-none",name:"todo",style:{"min-height":"150px"}},{default:t(()=>[e(D,{separator:"",bordered:""},{default:t(()=>[(r(!0),b(q,null,w(V(o).doingLists,(a,g)=>_((r(),u(f,{key:a._id,item:a,index:g,clickable:""},{default:t(()=>[e(s,{avatar:""},{default:t(()=>[e(N,{modelValue:a.isDone,"onUpdate:modelValue":d=>a.isDone=d,name:"isDone",color:"primary",onClick:y(d=>I("isDone",a._id,a.isDone),["stop"])},null,8,["modelValue","onUpdate:modelValue","onClick"])]),_:2},1024),e(s,null,{default:t(()=>[e(v,null,{default:t(()=>[i("div",{class:M([a.color,"text-body2"])},x(a.todo),3),i("div",_e,x(a.createdAt),1)]),_:2},1024)]),_:2},1024),e(Y,{color:"primary",padding:"none",flat:"",size:"sm","dropdown-icon":"change_history",onClick:l[2]||(l[2]=y(()=>{},["stop"]))},{default:t(()=>[e(D,null,{default:t(()=>[_((r(),u(f,{clickable:"",onClick:d=>L(a)},{default:t(()=>[e(s,{avatar:""},{default:t(()=>[e(m,{name:"edit_note",color:"primary",size:"sm"})]),_:1}),e(s,null,{default:t(()=>[e(v,null,{default:t(()=>[p("\u7F16\u8F91")]),_:1})]),_:1})]),_:2},1032,["onClick"])),[[k]]),e(h),_((r(),u(f,{clickable:"",onClick:d=>S(a._id)},{default:t(()=>[e(s,{avatar:""},{default:t(()=>[e(m,{name:"delete",color:"red",size:"sm"})]),_:1}),e(s,null,{default:t(()=>[e(v,null,{default:t(()=>[p("\u5220\u9664")]),_:1})]),_:1})]),_:2},1032,["onClick"])),[[k]]),e(h),_((r(),u(f,{clickable:"",onClick:d=>B(a)},{default:t(()=>[e(s,{avatar:""},{default:t(()=>[e(m,{name:"color_lens",color:"teal",size:"sm"})]),_:1}),e(s,null,{default:t(()=>[e(v,null,{default:t(()=>[p("\u989C\u8272")]),_:1})]),_:1})]),_:2},1032,["onClick"])),[[k]])]),_:2},1024)]),_:2},1024)]),_:2},1032,["item","index"])),[[A]])),128))]),_:1}),V(o).doingLists.length?R("",!0):(r(),b("div",fe,[e(m,{name:"check",size:"50px",color:"primary"}),ve]))]),_:1}),e(j,{class:"q-pa-none",name:"done",style:{"min-height":"150px"}},{default:t(()=>[e(D,{separator:"",bordered:""},{default:t(()=>[(r(!0),b(q,null,w(V(o).doneLists,(a,g)=>_((r(),u(f,{key:a._id,item:a,index:g,clickable:""},{default:t(()=>[e(s,{avatar:""},{default:t(()=>[e(N,{modelValue:a.isDone,"onUpdate:modelValue":d=>a.isDone=d,color:"primary",onClick:y(d=>I("isDone",a._id,a.isDone),["stop"])},null,8,["modelValue","onUpdate:modelValue","onClick"])]),_:2},1024),e(s,null,{default:t(()=>[e(v,null,{default:t(()=>[i("div",{class:M(a.color)},x(a.todo),3)]),_:2},1024),i("div",ge,x(a.createdAt),1)]),_:2},1024),e(Y,{color:"primary",padding:"none",flat:"",size:"sm","dropdown-icon":"change_history",onClick:l[3]||(l[3]=y(()=>{},["stop"]))},{default:t(()=>[e(D,null,{default:t(()=>[_((r(),u(f,{clickable:"",onClick:d=>L(a)},{default:t(()=>[e(s,{avatar:""},{default:t(()=>[e(m,{name:"edit_note",color:"primary",size:"sm"})]),_:1}),e(s,null,{default:t(()=>[e(v,null,{default:t(()=>[p("\u7F16\u8F91")]),_:1})]),_:1})]),_:2},1032,["onClick"])),[[k]]),e(h),_((r(),u(f,{clickable:"",onClick:d=>S(a._id)},{default:t(()=>[e(s,{avatar:""},{default:t(()=>[e(m,{name:"delete",color:"red",size:"sm"})]),_:1}),e(s,null,{default:t(()=>[e(v,null,{default:t(()=>[p("\u5220\u9664")]),_:1})]),_:1})]),_:2},1032,["onClick"])),[[k]]),e(h),_((r(),u(f,{clickable:"",onClick:d=>B(a)},{default:t(()=>[e(s,{avatar:""},{default:t(()=>[e(m,{name:"color_lens",color:"teal",size:"sm"})]),_:1}),e(s,null,{default:t(()=>[e(v,null,{default:t(()=>[p("\u989C\u8272")]),_:1})]),_:1})]),_:2},1032,["onClick"])),[[k]])]),_:2},1024)]),_:2},1024)]),_:2},1032,["item","index"])),[[A]])),128))]),_:1}),V(o).doneLists.length?R("",!0):(r(),b("div",ke,[e(m,{name:"check",size:"50px",color:"primary"}),ye]))]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),_:1}))}};var Se=E(be,[["__scopeId","data-v-506dd856"]]);export{Se as default};
