import{bu as re,c as ue,a9 as z,u as ce,f as me,j as ge,k as be,r as C,aE as R,n as ve,a as b,w as T,o as fe,d,g as _e,ap as N,t as he,bd as pe,x as Ve,R as O,a4 as xe,H as ke,q as Pe,J as h,K as P,L as o,N as n,al as V,O as v,am as D,an as Ue,ao as Ce,as as Se,S as q,P as ye,aV as w,T as U,aq as L,b8 as Q,aW as g}from"./index.f8654bd3.js";import{Q as $}from"./QTooltip.ce9c4084.js";import{Q as Ie,a as A}from"./QItem.f1aecbeb.js";import{Q as M}from"./QItemLabel.8856944f.js";import{Q as qe}from"./QSlideTransition.c284fa19.js";import{Q as Te}from"./QList.4a37c582.js";import{Q as we}from"./QPage.9022740f.js";import{u as Le}from"./store.db1f7155.js";import"./axios.7331a07d.js";const x=re({}),Qe=Object.keys(z);var B=ue({name:"QExpansionItem",props:{...z,...ce,...me,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:Number,headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...ge,"click","afterShow","afterHide"],setup(a,{slots:r,emit:k}){const{proxy:{$q:_}}=_e(),p=be(a,_),i=C(a.modelValue!==null?a.modelValue:a.defaultOpened),s=C(null),S=R(),{show:u,hide:m,toggle:e}=ve({showing:i});let c,l;const K=b(()=>`q-expansion-item q-item-type q-expansion-item--${i.value===!0?"expanded":"collapsed"} q-expansion-item--${a.popup===!0?"popup":"standard"}`),G=b(()=>{if(a.contentInsetLevel===void 0)return null;const t=_.lang.rtl===!0?"Right":"Left";return{["padding"+t]:a.contentInsetLevel*56+"px"}}),y=b(()=>a.disable!==!0&&(a.href!==void 0||a.to!==void 0&&a.to!==null&&a.to!=="")),F=b(()=>{const t={};return Qe.forEach(f=>{t[f]=a[f]}),t}),J=b(()=>y.value===!0||a.expandIconToggle!==!0),W=b(()=>a.expandedIcon!==void 0&&i.value===!0?a.expandedIcon:a.expandIcon||_.iconSet.expansionItem[a.denseToggle===!0?"denseIcon":"icon"]),X=b(()=>a.disable!==!0&&(y.value===!0||a.expandIconToggle===!0)),Y=b(()=>({expanded:i.value===!0,detailsId:a.targetUid,toggle:e,show:u,hide:m})),j=b(()=>{const t=a.toggleAriaLabel!==void 0?a.toggleAriaLabel:_.lang.label[i.value===!0?"collapse":"expand"](a.label);return{role:"button","aria-expanded":i.value===!0?"true":"false","aria-controls":S,"aria-label":t}});T(()=>a.group,t=>{l!==void 0&&l(),t!==void 0&&H()});function Z(t){y.value!==!0&&e(t),k("click",t)}function ee(t){t.keyCode===13&&E(t,!0)}function E(t,f){f!==!0&&s.value!==null&&s.value.focus(),e(t),xe(t)}function ae(){k("afterShow")}function le(){k("afterHide")}function H(){c===void 0&&(c=R()),i.value===!0&&(x[a.group]=c);const t=T(i,I=>{I===!0?x[a.group]=c:x[a.group]===c&&delete x[a.group]}),f=T(()=>x[a.group],(I,se)=>{se===c&&I!==void 0&&I!==c&&m()});l=()=>{t(),f(),x[a.group]===c&&delete x[a.group],l=void 0}}function te(){const t={class:[`q-focusable relative-position cursor-pointer${a.denseToggle===!0&&a.switchToggleSide===!0?" items-end":""}`,a.expandIconClass],side:a.switchToggleSide!==!0,avatar:a.switchToggleSide},f=[d(O,{class:"q-expansion-item__toggle-icon"+(a.expandedIcon===void 0&&i.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:W.value})];return X.value===!0&&(Object.assign(t,{tabindex:0,...j.value,onClick:E,onKeyup:ee}),f.unshift(d("div",{ref:s,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),d(A,t,()=>f)}function ne(){let t;return r.header!==void 0?t=[].concat(r.header(Y.value)):(t=[d(A,()=>[d(M,{lines:a.labelLines},()=>a.label||""),a.caption?d(M,{lines:a.captionLines,caption:!0},()=>a.caption):null])],a.icon&&t[a.switchToggleSide===!0?"push":"unshift"](d(A,{side:a.switchToggleSide===!0,avatar:a.switchToggleSide!==!0},()=>d(O,{name:a.icon})))),a.disable!==!0&&a.hideExpandIcon!==!0&&t[a.switchToggleSide===!0?"unshift":"push"](te()),t}function oe(){const t={ref:"item",style:a.headerStyle,class:a.headerClass,dark:p.value,disable:a.disable,dense:a.dense,insetLevel:a.headerInsetLevel};return J.value===!0&&(t.clickable=!0,t.onClick=Z,Object.assign(t,y.value===!0?F.value:j.value)),d(Ie,t,ne)}function ie(){return he(d("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:G.value,id:S},Ve(r.default)),[[pe,i.value]])}function de(){const t=[oe(),d(qe,{duration:a.duration,onShow:ae,onHide:le},ie)];return a.expandSeparator===!0&&t.push(d(N,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:p.value}),d(N,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:p.value})),t}return a.group!==void 0&&H(),fe(()=>{l!==void 0&&l()}),()=>d("div",{class:K.value},[d("div",{class:"q-expansion-item__container relative-position"},de())])}});const $e=v("h5",{class:"q-mt-none q-mb-md text-center"},"\u7BA1\u7406\u9875",-1),Ae=v("div",{class:"text-subtitle2"}," \u8FC7\u6EE4\uFF1A ",-1),Be={class:"row q-gutter-md justify-center"},Ne=v("div",{class:"text-subtitle2"},"\u59D3\u540D\uFF1A",-1),Oe=v("div",{class:"text-subtitle2"},"\u7535\u8BDD\uFF1A",-1),je=v("div",{class:"text-subtitle2"},"\u6027\u522B\uFF1A",-1),Ee=v("div",{class:"text-subtitle2"},"\u751F\u65E5:",-1),He=v("div",{class:"text-subtitle2"},"\u521B\u5EFA\u65F6\u95F4\uFF1A",-1),Re=v("div",{class:"text-subtitle2"},"\u6700\u540E\u767B\u5F55\uFF1A",-1),De={key:0,class:"q-pa-md row justify-center"},Ze={__name:"ManagementPage",setup(a){const r=Le(),k=ke(),_=C([]),p=C(""),i=C(!1),s=async(u,m,e)=>{if(!u||!m||typeof e!="boolean"){r.failureTip("\u53C2\u6570\u6709\u8BEF");return}i.value=!0;const c={id:u,field:m,value:e,user:r.user.email};await r.axios.post("/user/setuser",c).then(l=>{l.status===201&&r.successTip(l.data.msg)}).catch(l=>{r.failureTip(l.response.data.msg)}).finally(()=>{i.value=!1})},S=b(()=>{const u=p.value.toLowerCase().trim();return u?_.value.filter(m=>m.email.toLowerCase().includes(u)):_.value});return Pe(async()=>{try{await r.verifyUser(),r.user?r.axios.post("/user/alluser",{user:r.user.email}).then(u=>{_.value=u.data}).catch(u=>{console.log(u.response.data.msg)}):k.push("/index")}catch{k.push("/index")}}),(u,m)=>(h(),P(we,{class:"q-pa-md"},{default:o(()=>[$e,n(V,{modelValue:p.value,"onUpdate:modelValue":m[0]||(m[0]=e=>p.value=e),dense:"",outlined:"",class:"q-py-md"},{before:o(()=>[Ae]),prepend:o(()=>[n(O,{name:"search"})]),_:1},8,["modelValue"]),v("div",Be,[(h(!0),D(Ce,null,Ue(S.value,(e,c)=>(h(),P(Te,{key:c,item:e,bordered:"",class:"rounded-borders col-12 col-md-5 col-lg-3 shadow-3"},{default:o(()=>[v("div",{class:Se(["coloum text-center text-h6 q-pa-md",e.banned?"text-strike":""])},[q(ye(e.email)+" ",1),e.userPrivilege.superUser?(h(),P(w,{key:0,"text-color":"green",icon:"star",size:"lg"},{default:o(()=>[n($,null,{default:o(()=>[q(" \u7BA1\u7406\u5458 ")]),_:1})]),_:1})):U("",!0),e.activationCode!=null?(h(),P(w,{key:1,"text-color":"grey",icon:"question_mark",size:"lg"},{default:o(()=>[n($,null,{default:o(()=>[q(" \u7528\u6237\u672A\u6FC0\u6D3B ")]),_:1})]),_:1})):U("",!0),e.banned?(h(),P(w,{key:2,"text-color":"red",icon:"remove_circle_outline",size:"lg"},{default:o(()=>[n($,null,{default:o(()=>[q(" \u7528\u6237\u5DF2\u7981\u7528 ")]),_:1})]),_:1})):U("",!0)],2),n(N),n(B,{"expand-separator":"",icon:"perm_identity",label:"\u7528\u6237\u4FE1\u606F"},{default:o(()=>[n(L,{class:"shadow-3"},{default:o(()=>[n(Q,null,{default:o(()=>[n(V,{modelValue:e.name,"onUpdate:modelValue":l=>e.name=l,dense:"",flat:"",readonly:"","item-aligned":""},{before:o(()=>[Ne]),_:2},1032,["modelValue","onUpdate:modelValue"]),n(V,{modelValue:e.phone,"onUpdate:modelValue":l=>e.phone=l,dense:"",flat:"",readonly:"","item-aligned":""},{before:o(()=>[Oe]),_:2},1032,["modelValue","onUpdate:modelValue"]),n(V,{modelValue:e.gender,"onUpdate:modelValue":l=>e.gender=l,dense:"",flat:"",readonly:"","item-aligned":""},{before:o(()=>[je]),_:2},1032,["modelValue","onUpdate:modelValue"]),n(V,{modelValue:e.birth,"onUpdate:modelValue":l=>e.birth=l,dense:"",flat:"",readonly:"","item-aligned":""},{before:o(()=>[Ee]),_:2},1032,["modelValue","onUpdate:modelValue"]),n(V,{modelValue:e.createdAt,"onUpdate:modelValue":l=>e.createdAt=l,dense:"",flat:"",readonly:"","item-aligned":""},{before:o(()=>[He]),_:2},1032,["modelValue","onUpdate:modelValue"]),n(V,{modelValue:e.lastLogin,"onUpdate:modelValue":l=>e.lastLogin=l,dense:"",flat:"",readonly:"","item-aligned":""},{before:o(()=>[Re]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024),n(B,{"expand-separator":"",icon:"task_alt",label:"\u64CD\u4F5C\u6743\u9650","header-class":"text-primary"},{default:o(()=>[n(L,null,{default:o(()=>[n(Q,null,{default:o(()=>[e.email!=="47262243@qq.com"?(h(),P(g,{key:0,modelValue:e.userPrivilege.superUser,"onUpdate:modelValue":l=>e.userPrivilege.superUser=l,name:"user.userPrivilege.superUser",color:"green",label:"\u7BA1\u7406\u5458","left-label":"",disable:i.value,onClick:l=>s(e._id,"userPrivilege.superUser",e.userPrivilege.superUser)},null,8,["modelValue","onUpdate:modelValue","disable","onClick"])):U("",!0),n(g,{modelValue:e.userPrivilege.read,"onUpdate:modelValue":l=>e.userPrivilege.read=l,name:"user.userPrivilege.read",color:"green",label:"\u8BFB\u53D6","left-label":"",disable:i.value,onClick:l=>s(e._id,"userPrivilege.read",e.userPrivilege.read)},null,8,["modelValue","onUpdate:modelValue","disable","onClick"]),n(g,{modelValue:e.userPrivilege.add,"onUpdate:modelValue":l=>e.userPrivilege.add=l,name:"user.userPrivilege.add",color:"green",label:"\u589E\u52A0","left-label":"",disable:i.value,onClick:l=>s(e._id,"userPrivilege.add",e.userPrivilege.add)},null,8,["modelValue","onUpdate:modelValue","disable","onClick"]),n(g,{modelValue:e.userPrivilege.delete,"onUpdate:modelValue":l=>e.userPrivilege.delete=l,name:"user.userPrivilege.delete",color:"green",label:"\u5220\u9664","left-label":"",disable:i.value,onClick:l=>s(e._id,"userPrivilege.delete",e.userPrivilege.delete)},null,8,["modelValue","onUpdate:modelValue","disable","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024),n(B,{"expand-separator":"",icon:"drafts",label:"\u8BBF\u95EE\u7C7B\u578B","header-class":"text-teal"},{default:o(()=>[n(L,null,{default:o(()=>[n(Q,null,{default:o(()=>[n(g,{modelValue:e.databasePermissions.ip,"onUpdate:modelValue":l=>e.databasePermissions.ip=l,color:"green",label:"\u7EC8\u7AEF","left-label":"",disable:i.value,onClick:l=>s(e._id,"databasePermissions.ip",e.userPrivilege.delete)},null,8,["modelValue","onUpdate:modelValue","disable","onClick"]),n(g,{modelValue:e.databasePermissions.phone,"onUpdate:modelValue":l=>e.databasePermissions.phone=l,color:"green",label:"\u7535\u8BDD","left-label":"",disable:i.value,onClick:l=>s(e._id,"databasePermissions.phone",e.databasePermissions.phone)},null,8,["modelValue","onUpdate:modelValue","disable","onClick"]),n(g,{modelValue:e.databasePermissions.printer,"onUpdate:modelValue":l=>e.databasePermissions.printer=l,color:"green",label:"\u8017\u6750","left-label":"",disable:i.value,onClick:l=>s(e._id,"databasePermissions.printer",e.databasePermissions.printer)},null,8,["modelValue","onUpdate:modelValue","disable","onClick"]),n(g,{modelValue:e.databasePermissions.datacenter,"onUpdate:modelValue":l=>e.databasePermissions.datacenter=l,color:"green",label:"\u673A\u623F","left-label":"",disable:i.value,onClick:l=>s(e._id,"databasePermissions.datacenter",e.databasePermissions.datacenter)},null,8,["modelValue","onUpdate:modelValue","disable","onClick"]),n(g,{modelValue:e.databasePermissions.surveillance,"onUpdate:modelValue":l=>e.databasePermissions.surveillance=l,color:"green",label:"\u76D1\u63A7","left-label":"",disable:i.value,onClick:l=>s(e._id,"databasePermissions.surveillance",e.databasePermissions.surveillance)},null,8,["modelValue","onUpdate:modelValue","disable","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024),e.email!=="47262243@qq.com"?(h(),D("div",De,[n(g,{modelValue:e.banned,"onUpdate:modelValue":l=>e.banned=l,color:"green",label:"\u7981\u7528\u8BE5\u8D26\u6237","left-label":"",disable:i.value,onClick:l=>s(e._id,"banned",e.banned)},null,8,["modelValue","onUpdate:modelValue","disable","onClick"])])):U("",!0)]),_:2},1032,["item"]))),128))])]),_:1}))}};export{Ze as default};
